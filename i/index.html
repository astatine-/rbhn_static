<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Redirecting...</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="You are being redirected to another site. Please wait for a moment." />
  <meta name="robots" content="noindex, nofollow" />

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Rotary Bengaluru " />
  <meta property="og:description" content="RBHN URL shortcut service" />
  <meta property="og:image" content="../RBHN Logo - tight.png" /> <!-- Replace with your logo -->
  <meta property="og:url" content="https://rbhn.org/i" /> <!-- Replace with this page's public URL -->
  <meta property="og:type" content="website" />

  <!-- Twitter Card (optional) -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Redirecting...">
  <meta name="twitter:description" content="You are being redirected. Please wait a second...">
  <meta name="twitter:image" content="https://yourdomain.com/logo.png">

  <!-- Google Analytics (GA4) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX'); // Replace with your actual GA4 Measurement ID
  </script>

  <style>
    #popup {
      display: flex;
      align-items: center;
      justify-content: center;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      font-family: sans-serif;
      font-size: 1.5em;
      z-index: 9999;
      flex-direction: column;
    }
    #logo {
      width: 100px;
      height: 100px;
      background: gray;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>

<div id="popup">
  <img src="../RBHN Logo - tight.png" alt="Logo" id="logo" style="width: 100px; height: 100px; margin-bottom: 20px;" />
  Redirecting you, please wait...
</div>

<script>
  const targetMap = {
    join: "https://tally.so/r/3jqxEQ",
    foo: "https://example.com/page-for-foo",
    bar: "https://example.com/bar-destination",
    help: "https://support.example.com",
    // Add more mappings here
  };

  function getQueryParams() {
    const params = {};
    const queryString = window.location.search.substring(1);
    const pairs = queryString.split("&");
    for (const pair of pairs) {
      const [key, value] = pair.split("=");
      if (key) params[decodeURIComponent(key)] = decodeURIComponent(value || "");
    }
    return params;
  }

  const params = getQueryParams();
  const targetKey = params.r;
  const baseUrl = targetMap[targetKey];

  if (baseUrl) {
    // Collect UTM parameters to preserve
    const utmParams = Object.entries(params)
      .filter(([key]) => key.startsWith("utm_"))
      .map(([key, val]) => `${encodeURIComponent(key)}=${encodeURIComponent(val)}`)
      .join("&");

    const redirectUrl = utmParams ? `${baseUrl}?${utmParams}` : baseUrl;

    setTimeout(() => {
      window.location.href = redirectUrl;
    }, 1000);
  } else {
    document.getElementById("popup").innerHTML = "<div>Invalid target. Please check your link.</div>";
  }
</script>

</body>
</html>

